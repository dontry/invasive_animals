# Victoria Guardian: The Front-end

This is the front-end codebase of Victoria Guardian. The codebase is stored in a private repository on Github. If the permission is granted,  users are authorized to fork the repository and run their own codebase.

This project is built in React along with the state management library Redux. React router is introduced to manage the application routing. Styled component is used to manage the styling of components. Following the TDD paradigm, the codebase covers a range of testing. For example, we create unit tests for various functions and APIs, the UI components are tested on the Storybook which allows you to develop UI components in isolation. In addition, integration testing is also set up to ensure the quality of the code before deployment.

**Live website:** [https://invasivespecies-500c6.appspot.com](https://invasivespecies-500c6.appspot.com)

**Password:** fit5120

---

## Installation

### Porject dependencies

Make sure you have the following major software or environment installed.

* Node: v9.11.1
* Create-react-app: v1.4.3
* React: v16.2.0
* Yarn: v1.6.0
* NPM: v5.6.0

### Run the code on a local machine

```bash
npm install
npm start
open http://localhost:3000
```

If use yarn

```bash
yarn install
yarn start
open http://localhost:3000
```

---

## Project Structure

![Project Structure](/docs/structure.png)

The root directory of the project consists of different configuration files and folders.

### Configuration

- **.storybook** The configuration folder of Storybook plugin.
- **.vscode** The settings of Visual Studio Code.
- **.babelrc** The plugins of Babel. Due to the potential incompatibility of different versions of Javascript, Babel is a plugin dedicated to remedy this issue.
- **.gitignore** This file is used for excluding files from being pushed to the remote repository such as credentials, installed packages etc.
- **.travis.yml** This file is the settings of Travis CI. With this file, Travis CI learns about your project and how you want your builds to be executed.
- **app.yaml** This file tells Google Cloud how to deploy the application on Appn Engine.
- **package.json** This JSON file provides most of the information of the project. It includes the project name, dependencies, scripts.

### Folders

- **build/** This folder contains the production code which is generated by executing `npm build`.
- **public/** This folder contains assets and the infrastructure files including **index.html** and the **manifest.json**.
- **node_modules/** This is the folder where all dependencies are located in.
- **src/** This is the source code folder containing all the necessary code of the project including the components, style files, assets, utilities and tests.

### Source Code

![Source Code](/docs/source_code.png)

The screenshot shows the overall structure of the project source code.

The root directory shows the entry point of application and several boilerplate files. Components and functions are located in different folders according to their category.

- **actions/, stores/, reducers/** These folders are for constructing Redux, which is used to manage the  states of application.
- **components/, containers/, pages/** These folders consist of all UI components. The **components/**  contains the basic UI components. They are organized according to the page the reside. **containers/** has the stateful components associated with Redux state. **pages/** is the place where the components assembled together to construct the particular page.
- **routes/** It is in charge of the application routing.
- **assets/** It contains images, styling files.
- **utils/** It consists of the functions used across the entire application such as the RESTful client API.
- **stories/** It is responsible for showcasing the UI components independently.
- **tests/** Other unit tests live in this folder.

---

## Testing

Testing reliability and robustness of the application is very important for ensuring the quality of system. Our project adopts the TDD(Test Driven Development) paradigm. Our testing covers unit tests, integration tests and usability tests.

### Unit Tests

```bash
npm test
```

This command will execute all the test cases in our codebase. The test cases include testing utility tools and APIs used in our project.

### Run Storybook

Storybook runs outside of the application. It enables us build the UI components quickly without worrying about the dependencies. [Learn more...](https://github.com/storybooks/storybook)

```bash
npm run storybook
open http://localhost:9009
```

![Storybook Screenshot](/docs/storybook.png)
The component list are on the left. The components are showcased on the right hand side.

We can look and feel the UI components easily on the panel. Any change we made in the component will be shown on Storybook immediately.

### Integration Testing

The project also adopts integration testing by using Travis CI. Travis CI is a hosted, distributed continuous integration service used to build and test software projects hosted at GitHub. [Learn more...](https://travis-ci.org/)

Everytime when the changes are committed and pushed to the remote repository, Travis CI will be activated and run the test suites in the project automatically.

Travis CI is configured by adding a file named .travis.yml, which is a YAML format text file, to the root directory of the repository.

Travis CI creates a log for the building and testing process.
![Travis CI screenshot](/docs/travis_ci.png)

### Performance Testing

The project also conducts performance testing by using Lighthouse. Lighthouse is an an open-source, automated tool for improving the quality of web pages. It has audits for performance, accessibility, progressive web apps, and more. We can run Lighthouse in Chrome DevTools.
![Lighthouse](/docs/lighthouse.png)

---

## Deploying on Google Cloud Platform

This project currently is hosted on Google Cloud Platform. 
The project ID is **invasivespecies-500c6**

### Deployment Steps

1. In order to deploy the codebase to Google Cloud, it is required to install the Google Cloud SDK first. [Learn more...](https://cloud.google.com/sdk/docs/)

2. After you install Cloud SDK, the next step is typically run the gcloud init command to perform initial setup tasks. You can also run gcloud init at a later time to change your settings or create a new configuration. During the initialisation process, you are also required to complete the authorization step when prompted. [Learn more...](
    https://cloud.google.com/sdk/docs/initializing)
    ```bash
    gcloud init
    ```
3. Configure the deployment setting. Basically you just need to add the configurattion file **app.yaml** to the root directory.  [Learn more...](https://cloud.google.com/appengine/docs/flexible/nodejs/configuration-files)

4. Deploy onto the Google cloud: execute the command

    ```bash
    gcloud app deploy --project your-project-id
    ```
    The app engine will be deployed in  several minutes. You can then browse the website with the command
    ```bash
    gclound app browse
    ```

### Administration

Once the project is deloyed, you can log on Google Cloud Platform to check out the status of the project. The dashboard on the front page shows the overview of the current project including the traffic of the website and the numbers of requests in a period of time.
![Dashboard](/docs/dashboard.png)

App Engine application is auto-scalable which means that if the traffic increases, the app will scale up the number of instances to provide consistent performance.
